/*** Property File for Investigation Reports***/



SELECT.LAB_COMBO.HIVT_LABORATORY_MST=select gnum_lab_code, gstr_lab_name from hivt_laboratory_mst where gnum_isvalid=1 and gnum_hospital_code =? order by gstr_lab_name

SELECT.LAB_INV_COMBO.HIVT_LABORATORY_MST= Select gnum_lab_code, gstr_lab_name from hivt_laboratory_mst where gnum_isvalid=1 and gnum_hospital_code=? and gnum_dept_code like ? order by gstr_lab_name

SELECT.TEST_COMBO.HIVT_LABORATORY_MST= Select distinct gnum_test_code ,pkg_inv_fun.fun_test_name(gnum_test_code) as testName from hivt_laboratory_test_mst where gnum_isvalid =1 and gnum_hospital_code =? and gnum_labcode like ?  ORDER BY testName

SELECT.TEST_COMBO.HIVT_LABORATORY_MST1= Select distinct gnum_test_code ,pkg_inv_fun.fun_test_name(gnum_test_code) as testName from hivt_laboratory_test_mst where gnum_isvalid =1 and gnum_hospital_code =? and gnum_labcode like ? and gnum_labcode in (select gnum_lab_code from hivt_laboratory_mst where gnum_isvalid=1 and gnum_dept_code like ? and gnum_hospital_code=?) ORDER BY testName

SELECT.DEPT_COMBO.HIVT_LABORATORY_MST= select gnum_dept_code, gstr_dept_name  from gblt_department_mst where gnum_isvalid=1 and gnum_hospital_code=? order by gstr_dept_name

SELECT.SAMPLE.HIVT_SAMPLE_MST= select distinct gnum_sample_code, pkg_inv_fun.fun_sample_name(gnum_sample_code) as sample_name from hivt_labtest_sample_mst where gnum_isvalid=1 and gnum_hospital_code=? and gnum_lab_code like ? and gnum_test_code like ? order by sample_name

SELECT.LAB_DEPT_COMBO.HIVT_LABORATORY_MST=Select gnum_lab_code, (Select gstr_dept_name as deptName from gblt_department_mst where gnum_isvalid=1 and gnum_dept_code = a.gnum_dept_code and gnum_hospital_code = a.gnum_hospital_code) ||'-'|| gstr_lab_name from hivt_laboratory_mst a where gnum_isvalid=1 and gnum_hospital_code = ? order by (Select gstr_dept_name as deptName from gblt_department_mst where gnum_isvalid=1 and gnum_dept_code = a.gnum_dept_code and gnum_hospital_code = a.gnum_hospital_code) 

SELECT.DEPT_COMBO.HIVT_LABORATORY_MST.STATISTICAL_REPORT= select gnum_dept_code, gstr_dept_name  from gblt_department_mst where gnum_isvalid=1 and gnum_hospital_code=? order by gstr_dept_name

SELECT.SAMPLE.HIVT_SAMPLE_MST.STATISTICAL_REPORT= select distinct gnum_sample_code, pkg_inv_fun.fun_sample_name(gnum_sample_code) as sample_name from hivt_labtest_sample_mst where gnum_isvalid=1 and gnum_hospital_code=? and gnum_lab_code like ? and gnum_test_code like ? order by sample_name

SELECT.MACHINE_TEST_PARAMETER_MST.MACHINE_COMBO=select HMINUM_MACHINE_ID as machineCode,  HMISTR_MACHINE_NAME  as machineName from HMIT_MACHINE_MST where gnum_isvalid=1 and gnum_hospital_code=? order by machineName


SELECT.LABTEST_MACHINE.HIVT_LABTEST_MST.MACHINE=select HMINUM_MACHINE_ID as machineId,  HMISTR_MACHINE_NAME  as machineName from HMIT_MACHINE_MST m where gnum_isvalid=1 and gnum_hospital_code=? and exists (select 1 from hivt_laboratory_mst where gnum_lab_code=? and gnum_location_code=m.gnum_location_code and gnum_hospital_code=m.gnum_hospital_code) order by machineName

#Added By Prashant For Fetching LabCombo For Radio Lab
SELECT.LAB_INV_COMBO_RD.HIVT_LABORATORY_MST= Select gnum_lab_code, gstr_lab_name from hivt_laboratory_mst where gnum_isvalid=1 and gnum_hospital_code=? and gnum_isradiolab=1 and gnum_dept_code like ? order by gstr_lab_name

#Added By Prashant For Fetching TestCombo For Radio Lab
SELECT.TEST_COMBO_RD.HIVT_LABORATORY_MST1= Select distinct gnum_test_code ,pkg_inv_fun.fun_test_name(gnum_test_code) as testName from hivt_laboratory_test_mst where gnum_isvalid =1 and gnum_hospital_code =? and gnum_labcode like ? and gnum_labcode in (select gnum_lab_code from hivt_laboratory_mst where gnum_isvalid=1 and gnum_dept_code like ? and gnum_hospital_code=? and gnum_isradiolab=1) ORDER BY testName



#--------------------Queries For Machine Test Report PrashantMi List Start---------------------------------------------------------------------------------------------------------------------------#
SELECT.LAB_COMBO_NEW.HIVT_LABORATORY_MST=SELECT m.labCode ,m.labName ,m.patTestType FROM ( SELECT GNUM_LAB_CODE AS labCode ,INITCAP(pkg_clinical_util_fun.get_dept_name(gnum_hospital_code, gnum_dept_code)) AS departmenName ,gstr_lab_name AS labName ,hgnum_pat_test_type AS patTestType FROM hivt_laboratory_mst a WHERE gnum_isvalid = 1 AND gnum_hospital_code = ? AND a.gnum_lab_code IN ( SELECT gnum_column_value FROM gblt_role_seat_table_dtl p WHERE p.gbl_isvalid = 1 AND p.gnum_module_id = ? AND p.gstr_table_name = 'HIVT_LABORATORY_MST' AND p.gstr_column_name = 'GNUM_LAB_CODE' AND p.gnum_seatid = ? AND p.gnum_hospital_code = ? ) ORDER BY departmenName ,labName ) m order by m.labName

SELECT.LABTEST_MACHINE_NEW.HIVT_LABTEST_MST.MACHINE=select HMINUM_MACHINE_ID as machineId,  HMISTR_MACHINE_NAME  as machineName from HMIT_MACHINE_MST m where gnum_isvalid=1 and gnum_hospital_code=? and exists (select 1 from hivt_laboratory_mst where gnum_lab_code=? and gnum_location_code=m.gnum_location_code and gnum_hospital_code=m.gnum_hospital_code) order by machineName

SELECT.MACHINE_LABTEST_LIST_WITHOUT_TIME.HIVT_LABTEST_MST.MACHINE=SELECT pkg_inv_fun.fun_puk_fromreqno(hivnum_req_no, d.gnum_hospital_code) AS crno ,hivnum_temp_sample_no::CHARACTER VARYING AS smplno ,hmistr_pat_name::CHARACTER VARYING AS patname ,RTRIM(pkg_inv_fun.fun_patage_fromreqno(hivnum_req_no, d.gnum_hospital_code)) || '/' || (pkg_inv_fun.fun_gender_fromreqno(hivnum_req_no, d.gnum_hospital_code)) AS agg ,pkg_inv_fun.fun_sample_name(gnum_sample_code) AS samplename ,pkg_inv_fun.fun_lab_name(gnum_lab_code, d.gnum_hospital_code) AS labname ,pkg_inv_fun.getgroupname(hgnum_group_code, d.gnum_hospital_code) AS groupname ,pkg_inv_fun.fun_test_name(gnum_test_code) AS testname ,( SELECT hmistr_machine_name FROM hmit_machine_mst dd WHERE dd.hminum_machine_id = d.hminum_machine_id AND dd.gnum_hospital_code = d.gnum_hospital_code ) AS machineName ,to_char(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptance ,to_char(c.hivdt_coll_date_time, 'dd - Mon - yyyy HH24: Mi') AS collect ,c.hivdt_acceptance_date_time AS acceptanceDateTime ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING FROM hmit_sample_dtl d ,hivt_requisition_dtl c WHERE d.hminum_test_status IN ( 1 ,2 ) AND d.hminum_inv_reqdno = c.hivtnum_req_dno AND d.gnum_hospital_code = c.gnum_hospital_code AND c.gnum_machine_code = d.hminum_machine_id AND TRUNC(hivdt_acceptance_date_time) >= TO_DATE(?, 'DD - Mon - YYYY hh24: mi') AND TRUNC(hivdt_acceptance_date_time) <= TO_DATE(?, 'DD - Mon - YYYY hh24: mi') AND hgnum_group_code IS NULL AND c.hivnum_reqdtl_status = 17 AND d.gnum_hospital_code = ? AND hivdt_acceptance_seatid = ? AND gnum_machine_code = ? UNION ( SELECT crno ,smplno ,patname ,agg ,samplename ,labname ,groupname ,testname ,machineName ,acceptance ,collect ,acceptanceDateTime ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING FROM ( SELECT pkg_inv_fun.fun_puk_fromreqno(hivnum_req_no, d.gnum_hospital_code) AS crno ,hivnum_temp_sample_no::CHARACTER VARYING AS smplno ,hmistr_pat_name::CHARACTER VARYING AS patname ,RTRIM(pkg_inv_fun.fun_patage_fromreqno(hivnum_req_no, d.gnum_hospital_code)) || '/' || (pkg_inv_fun.fun_gender_fromreqno(hivnum_req_no, d.gnum_hospital_code)) AS agg ,pkg_inv_fun.fun_sample_name(gnum_sample_code) AS samplename ,pkg_inv_fun.fun_lab_name(gnum_lab_code, d.gnum_hospital_code) AS labname ,pkg_inv_fun.getgroupname(hgnum_group_code, d.gnum_hospital_code) AS groupname ,pkg_inv_fun.fun_test_name1(c.hivnum_req_no::CHARACTER VARYING, hgnum_group_code::CHARACTER VARYING, d.gnum_hospital_code::CHARACTER VARYING) AS testname ,( SELECT hmistr_machine_name FROM hmit_machine_mst dd WHERE dd.hminum_machine_id = d.hminum_machine_id AND dd.gnum_hospital_code = d.gnum_hospital_code ) AS machineName ,to_char(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptance ,to_char(c.hivdt_coll_date_time, 'dd - Mon - yyyy HH24: Mi') AS collect ,to_date(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptanceDateTime ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING ,''''::CHARACTER VARYING FROM hmit_sample_dtl d ,hivt_requisition_dtl c WHERE d.hminum_test_status IN ( 1 ,2 ) AND d.hminum_inv_reqdno = c.hivtnum_req_dno AND d.gnum_hospital_code = c.gnum_hospital_code AND c.gnum_machine_code = d.hminum_machine_id AND TRUNC(hivdt_acceptance_date_time) >= TO_DATE(?, 'DD-Mon-YYYY hh24:mi') AND TRUNC(hivdt_acceptance_date_time) <= TO_DATE(?, 'DD-Mon-YYYY hh24:mi') AND hgnum_group_code IS NOT NULL AND c.hivnum_reqdtl_status = 17 AND d.gnum_hospital_code = ? AND hivdt_acceptance_seatid = ? AND gnum_machine_code = ? GROUP BY acceptanceDateTime ,acceptance ,collect ,machineName ,smplno ,samplename ,testname ,groupname ,agg ,patname ,crno ,labname ) ) ORDER BY acceptanceDateTime desc ,smplno ,groupname ,collect ASC
#upadted
SELECT.MACHINE_LABTEST_LIST.HIVT_LABTEST_USERWISE_MST.MACHINE=SELECT pkg_inv_fun.fun_puk_fromreqno(hivnum_req_no, d.gnum_hospital_code) AS crno ,hivnum_temp_sample_no::VARCHAR AS sampleNo ,hmistr_pat_name::VARCHAR AS patientName ,RTRIM(pkg_inv_fun.fun_patage_fromreqno(hivnum_req_no, d.gnum_hospital_code)) || '/' || (pkg_inv_fun.fun_gender_fromreqno(hivnum_req_no, d.gnum_hospital_code)) AS ageGender ,pkg_inv_fun.fun_sample_name(gnum_sample_code) AS sampleName ,pkg_inv_fun.fun_lab_name(gnum_lab_code, d.gnum_hospital_code) AS labName ,pkg_inv_fun.getgroupname(hgnum_group_code, d.gnum_hospital_code) AS groupName ,pkg_inv_fun.fun_test_name(gnum_test_code) AS testName ,( SELECT hmistr_machine_name FROM hmit_machine_mst dd WHERE dd.hminum_machine_id = d.hminum_machine_id AND dd.gnum_hospital_code = d.gnum_hospital_code ) AS machineName ,to_char(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptance ,to_char(c.hivdt_coll_date_time, 'dd - Mon - yyyy HH24: Mi') AS collectionDateTime ,c.hivdt_acceptance_date_time AS acceptanceDateTime ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR, c.hgstr_daily_labno AS accessionNo FROM hmit_sample_dtl d ,hivt_requisition_dtl c WHERE d.hminum_test_status IN ( 1 ,2 ) AND d.hminum_inv_reqdno = c.hivtnum_req_dno AND d.gnum_hospital_code = c.gnum_hospital_code AND c.gnum_machine_code = d.hminum_machine_id AND (hivdt_acceptance_date_time) >= TO_DATE(?, 'DD - Mon - YYYY hh24: mi') AND (hivdt_acceptance_date_time) <= TO_DATE(?, 'DD - Mon - YYYY hh24: mi') AND hgnum_group_code IS NULL AND c.hivnum_reqdtl_status = 17 AND d.gnum_hospital_code = ? AND hivdt_acceptance_seatid = ? AND gnum_lab_code = ? AND gnum_machine_code = ? UNION ( SELECT crno ,sampleNo ,patientName ,ageGender ,sampleName ,labName ,groupName ,testName ,machineName ,acceptance ,collectionDateTime ,acceptanceDateTime ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR, accessionNo FROM ( SELECT pkg_inv_fun.fun_puk_fromreqno(hivnum_req_no, d.gnum_hospital_code) AS crno ,hivnum_temp_sample_no::VARCHAR AS sampleNo ,hmistr_pat_name::VARCHAR AS patientName ,RTRIM(pkg_inv_fun.fun_patage_fromreqno(hivnum_req_no, d.gnum_hospital_code)) || '/' || (pkg_inv_fun.fun_gender_fromreqno(hivnum_req_no, d.gnum_hospital_code)) AS ageGender ,pkg_inv_fun.fun_sample_name(gnum_sample_code) AS sampleName ,pkg_inv_fun.fun_lab_name(gnum_lab_code, d.gnum_hospital_code) AS labName ,pkg_inv_fun.getgroupname(hgnum_group_code, d.gnum_hospital_code) AS groupName ,pkg_inv_fun.fun_test_name1(c.hivnum_req_no::VARCHAR, hgnum_group_code::VARCHAR, d.gnum_hospital_code::VARCHAR) AS testName ,( SELECT hmistr_machine_name FROM hmit_machine_mst dd WHERE dd.hminum_machine_id = d.hminum_machine_id AND dd.gnum_hospital_code = d.gnum_hospital_code ) AS machineName ,to_char(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptance ,to_char(c.hivdt_coll_date_time, 'dd - Mon - yyyy HH24: Mi') AS collectionDateTime ,to_date(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptanceDateTime ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR, c.hgstr_daily_labno AS accessionNo FROM hmit_sample_dtl d ,hivt_requisition_dtl c WHERE d.hminum_test_status IN ( 1 ,2 ) AND d.hminum_inv_reqdno = c.hivtnum_req_dno AND d.gnum_hospital_code = c.gnum_hospital_code AND c.gnum_machine_code = d.hminum_machine_id AND (hivdt_acceptance_date_time) >= TO_DATE(?, 'DD-Mon-YYYY hh24:mi') AND (hivdt_acceptance_date_time) <= TO_DATE(?, 'DD-Mon-YYYY hh24:mi') AND hgnum_group_code IS NOT NULL AND c.hivnum_reqdtl_status = 17 AND d.gnum_hospital_code = ? AND hivdt_acceptance_seatid = ? AND gnum_lab_code = ? AND gnum_machine_code = ? GROUP BY acceptanceDateTime ,acceptance ,collectionDateTime ,machineName ,sampleNo,accessionNo ,sampleName ,testName ,groupName ,ageGender ,patientName ,crno ,labName ) ) ORDER BY acceptanceDateTime ASC ,sampleNo, accessionNo ,groupName ,collectionDateTime ASC
#upadted
SELECT.MACHINE_LABTEST_LIST.HIVT_LABTEST_ALLUSER_MST.MACHINE=SELECT pkg_inv_fun.fun_puk_fromreqno(hivnum_req_no, d.gnum_hospital_code) AS crno ,hivnum_temp_sample_no::VARCHAR AS sampleNo , hmistr_pat_name::VARCHAR AS patientName ,RTRIM(pkg_inv_fun.fun_patage_fromreqno(hivnum_req_no, d.gnum_hospital_code)) || '/' || (pkg_inv_fun.fun_gender_fromreqno(hivnum_req_no, d.gnum_hospital_code)) AS ageGender ,pkg_inv_fun.fun_sample_name(gnum_sample_code) AS sampleName ,pkg_inv_fun.fun_lab_name(gnum_lab_code, d.gnum_hospital_code) AS labName ,pkg_inv_fun.getgroupname(hgnum_group_code, d.gnum_hospital_code) AS groupName ,pkg_inv_fun.fun_test_name(gnum_test_code) AS testName ,( SELECT hmistr_machine_name FROM hmit_machine_mst dd WHERE dd.hminum_machine_id = d.hminum_machine_id AND dd.gnum_hospital_code = d.gnum_hospital_code ) AS machineName ,to_char(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptance ,to_char(c.hivdt_coll_date_time, 'dd - Mon - yyyy HH24: Mi') AS collectionDateTime ,c.hivdt_acceptance_date_time AS acceptanceDateTime ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR, c.hgstr_daily_labno AS accessionNo FROM hmit_sample_dtl d ,hivt_requisition_dtl c WHERE d.hminum_test_status IN ( 1 ,2 ) AND d.hminum_inv_reqdno = c.hivtnum_req_dno AND d.gnum_hospital_code = c.gnum_hospital_code AND c.gnum_machine_code = d.hminum_machine_id AND (hivdt_acceptance_date_time) >= TO_DATE(?, 'DD - Mon - YYYY hh24: mi') AND (hivdt_acceptance_date_time) <= TO_DATE(?, 'DD - Mon - YYYY hh24: mi') AND hgnum_group_code IS NULL AND c.hivnum_reqdtl_status = 17 AND d.gnum_hospital_code = ? AND gnum_lab_code = ? AND gnum_machine_code = ? UNION ( SELECT crno ,sampleNo ,patientName ,ageGender ,sampleName ,labName ,groupName ,testName ,machineName ,acceptance ,collectionDateTime ,acceptanceDateTime ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR, accessionNo FROM ( SELECT pkg_inv_fun.fun_puk_fromreqno(hivnum_req_no, d.gnum_hospital_code) AS crno ,hivnum_temp_sample_no::VARCHAR AS sampleNo ,hmistr_pat_name::VARCHAR AS patientName ,RTRIM(pkg_inv_fun.fun_patage_fromreqno(hivnum_req_no, d.gnum_hospital_code)) || '/' || (pkg_inv_fun.fun_gender_fromreqno(hivnum_req_no, d.gnum_hospital_code)) AS ageGender ,pkg_inv_fun.fun_sample_name(gnum_sample_code) AS sampleName ,pkg_inv_fun.fun_lab_name(gnum_lab_code, d.gnum_hospital_code) AS labName ,pkg_inv_fun.getgroupname(hgnum_group_code, d.gnum_hospital_code) AS groupName ,pkg_inv_fun.fun_test_name1(c.hivnum_req_no::VARCHAR, hgnum_group_code::VARCHAR, d.gnum_hospital_code::VARCHAR) AS testName ,( SELECT hmistr_machine_name FROM hmit_machine_mst dd WHERE dd.hminum_machine_id = d.hminum_machine_id AND dd.gnum_hospital_code = d.gnum_hospital_code ) AS machineName ,to_char(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptance ,to_char(c.hivdt_coll_date_time, 'dd - Mon - yyyy HH24: Mi') AS collectionDateTime ,to_date(c.hivdt_acceptance_date_time, 'dd - Mon - yyyy HH24: Mi') AS acceptanceDateTime ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR ,''''::VARCHAR, c.hgstr_daily_labno AS accessionNo FROM hmit_sample_dtl d ,hivt_requisition_dtl c WHERE d.hminum_test_status IN ( 1 ,2 ) AND d.hminum_inv_reqdno = c.hivtnum_req_dno AND d.gnum_hospital_code = c.gnum_hospital_code AND c.gnum_machine_code = d.hminum_machine_id AND (hivdt_acceptance_date_time) >= TO_DATE(?, 'DD-Mon-YYYY hh24:mi') AND (hivdt_acceptance_date_time) <= TO_DATE(?, 'DD-Mon-YYYY hh24:mi') AND hgnum_group_code IS NOT NULL AND c.hivnum_reqdtl_status = 17 AND d.gnum_hospital_code = ? AND gnum_lab_code = ? AND gnum_machine_code = ? GROUP BY acceptanceDateTime ,acceptance ,collectionDateTime ,machineName ,sampleNo, accessionNo ,sampleName ,testName ,groupName ,ageGender ,patientName ,crno ,labName ) ) ORDER BY acceptanceDateTime ASC ,sampleNo, groupName ,collectionDateTime ASC
#--------------------Queries For Machine Test Report List End ---------------------------------------------------------------------------------------------------------------------------#
